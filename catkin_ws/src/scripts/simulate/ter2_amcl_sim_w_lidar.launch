<launch>

  <arg name="map_filename" default="map.yaml" />
  <arg name="map_dir" default="$(find data)/map/" />

  <arg name="robot" value="ter2" />
  <arg name="mgr" value="pc_nodelet_mgr" />
  <param name="use_sim_time" value="true" />

  <include file="$(find scripts)/includes/$(arg mgr).launch.xml"/>

  <include file="$(find scripts)/includes/common_param_loader.launch.xml" >
    <arg name="robot" value="$(arg robot)" />    
  </include>

  <include file="$(find scripts)/includes/urg_node_tf.launch.xml" >
    <arg name="robot" value="$(arg robot)" />    
  </include>  

  <include file="$(find scripts)/includes/odometry.launch.xml" >
    <arg name="robot" value="$(arg robot)" />
  </include>

  <include file="$(find scripts)/includes/map_server.launch.xml" >
    <arg name="robot" value="$(arg robot)" />  
    <arg name="map_path" value="$(arg map_dir)$(arg map_filename)" />
  </include>

  <include file="$(find scripts)/includes/amcl.launch.xml" >
    <arg name="robot" value="$(arg robot)" />
    <arg name="init_x" value="0.0" />
    <arg name="init_y" value="0.0" />
    <arg name="init_a" value="0.0" />
  </include>    
  
	<node pkg="cirkit_waypoint_generator" type="cirkit_waypoint_generator" name="WaypntGenerator" output="screen" >
    <!-- Topic Name -->
    <remap from="/amcl_pose" to="/amcl/amcl_pose" />

    <!-- Parameter Name -->
    <param name="dist_th" value="0.3" />
    <param name="yaw_th" value="0.2" />

  </node>

  <node pkg="rviz" type="rviz" name="rviz" args="-d $(find configs)/rviz/amcl_simulation.rviz" />


</launch>
