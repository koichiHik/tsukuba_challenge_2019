<launch>

  <arg name="robot" />
  <arg name="cmd_vel" />


  <rosparam file="$(find configs)/control/$(arg robot)_yp_spur.yaml" command="load" />  

  <node pkg="ypspur_ros" type="ypspur_ros" name="ypspur" output="screen">

    <!-- YpSpur Topic Name Parameters -->
    <remap from="cmd_vel" to="$(arg cmd_vel)" />
    <remap from="odom" to="/ypspur/odom" />
    <remap from="ad/ad0" to="/ypspur/ad/ad0" />
    <remap from="ad/ad1" to="/ypspur/ad/ad1" />
    <remap from="ad/ad2" to="/ypspur/ad/ad2" />
    <remap from="ad/ad3" to="/ypspur/ad/ad3" />
    <remap from="ad/ad4" to="/ypspur/ad/ad4" />
    <remap from="ad/ad5" to="/ypspur/ad/ad5" />  
    <remap from="ad/ad6" to="/ypspur/ad/ad6" />
    <remap from="ad/ad7" to="/ypspur/ad/ad7" />
    <remap from="control_mode" to="/ypspur/control_mode" />
    <remap from="diagnostics" to="/ypspur/diagnostics" />
    <remap from="joint_position" to="/ypspur/joint_position" />  
    <remap from="joint_states" to="/ypspur/joint_states" />
    <remap from="joint_trajectory" to="/ypspur/joint_trajectory" />
    <remap from="wrench" to="/ypspur/wrench" />

    <!-- YpSpur Frame Name Parameters -->  
    <param name="~/odom_id"             value="/frame_name/odometry/ypspur" />
    <param name="~/base_link_id"        value="/frame_name/base_link" />

    <!-- YpSpur Control Limitation Parameters -->
    <remap from="~/vel"                 to="/ctrl_limit/max_vel_x" />
    <remap from="~/acc"                 to="/ctrl_limit/max_acc_x" />
    <remap from="~/angvel"              to="/ctrl_limit/max_vel_theta" />
    <remap from="~/angacc"              to="/ctrl_limit/max_acc_theta" />

    <!-- YpSpur Configuration Parameters -->
    <remap from="~/compatible"          to="/ypspur/compatible" />
    <remap from="~/port"                to="/ypspur/port" />

    <!-- YpSpur Settings -->
    <remap from="~/hz"                  to="/ypspur/hz" />
    <remap from="~/max_joint_id"        to="/ypspur/max_joint_id" />
    <remap from="~/joint0_enable"       to="/ypspur/joint0_enable" />
    <remap from="~/joint0_name"         to="/ypspur/joint0_name" />
    <remap from="~/joint1_enable"       to="/ypspur/joint1_enable" />
    <remap from="~/joint1_name"         to="/ypspur/joint1_name" />
    <remap from="~/odometry_mode"       to="/ypspur/odometry_mode" />    

    <!-- YpSpur Files -->
    <param name="~/ypspur_bin"          value="$(find scripts)/../../../../3rd_party/ypspur/install/bin/ypspur-coordinator" />
    <param name="~/param_file"          value="$(find configs)/control/$(arg robot)_yp_spur.param" />

  </node>

</launch>
