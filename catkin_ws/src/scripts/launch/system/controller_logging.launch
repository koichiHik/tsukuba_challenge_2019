<launch>
  <arg name="base_frame_id" default="base_link" />
  <arg name="imu_frame_id" default="imu_link" />
  <arg name="urg_frame_id" default="laser2d_link" />
  <arg name="velodyne_frame_id" default="laser3d_link" />
  <arg name="ypspur_odom_frame_id" default="odom_ypspur" />
  <!-- ypspur_ros node -->
  <arg name="ypspur_cmd_vel" default="cmd_vel" />
  <arg name="yp_spur_yaml_filepath" default="$(find scripts)/params/common/yp_spur.yaml" />
  <arg name="control_limit_filepath" default="$(find scripts)/params/common/control_limit.yaml" />
  <arg name="ypspur_bin_filepath" default="$(find scripts)/../../../../3rdparty/install/yp_spur/bin/ypspur-coordinator" />
  <arg name="ypspur_param_filepath" default="$(find scripts)/params/common/yp_spur.param" />
  <arg name="imu_port" default="/dev/RT_USB_IMU" />
  <!-- urg node-->
  <arg name="urg_node_yaml_filepath" default="$(find scripts)/params/common/urg_node.yaml" />
  <!-- velodyne node-->
  <arg name="velodyne_calibration" default="$(find velodyne_pointcloud)/params/VLP16db.yaml"/>
  <arg name="velodyne_param_filepath" default="$(find scripts)/params/common/velodyne.yaml" />
  <!-- Joystick -->
  <arg name="joystick_param_filepath" default="$(find scripts)/params/common/ps3_holonomic_config.yaml" />
  <arg name="rviz_config_file" default="$(find scripts)/rviz/config.rviz" />
  <!-- basenodes bringup -->
  <arg name="urdf_file" default="$(find scripts)/urdf/robot.urdf" />
  <arg name="odom_frame_id" default="odom" />
  <!-- odom node-->
  <arg name="robot_yaml_filepath" default="$(find scripts)/params/common/robot.yaml" />
  <arg name="odom_yaml_filepath" default="$(find scripts)/params/common/odometry.yaml" />
  <arg name="imu_adjust_param_filepath" default="$(find scripts)/params/common/imu_adjust.yaml" />
	<arg name="nmea_driver_param_filepath" default="$(find scripts)/params/common/nmea_navsat_driver.yaml" />
  <arg name="plane_number" default="9" />

  <include file="$(find scripts)/launch/system/hardware_bringup.launch" >
    <arg name="base_frame_id" value="$(arg base_frame_id)" />
    <arg name="imu_frame_id" value="$(arg imu_frame_id)" />
    <arg name="urg_frame_id" value="$(arg urg_frame_id)" />
    <arg name="velodyne_frame_id" value="$(arg velodyne_frame_id)" />
    <arg name="ypspur_odom_frame_id" value="$(arg ypspur_odom_frame_id)" />
    <!-- ypspur_ros node -->
    <arg name="ypspur_cmd_vel" value="$(arg ypspur_cmd_vel)" />
    <arg name="yp_spur_yaml_filepath" value="$(arg yp_spur_yaml_filepath)" />
    <arg name="control_limit_filepath" value="$(arg control_limit_filepath)" />
    <arg name="ypspur_bin_filepath" value="$(arg ypspur_bin_filepath)" />
    <arg name="ypspur_param_filepath" value="$(arg ypspur_param_filepath)" />
    <!-- imu node -->
    <arg name="imu_port" value="$(arg imu_port)" />
    <!-- urg node-->
    <arg name="urg_node_yaml_filepath" value="$(arg urg_node_yaml_filepath)" />
    <!-- velodyne node-->
    <arg name="velodyne_calibration" value="$(arg velodyne_calibration)"/>
    <arg name="velodyne_param_filepath" value="$(arg velodyne_param_filepath)" />
		<arg name="nmea_driver_param_filepath" value="$(arg nmea_driver_param_filepath)" />
  </include>

  <include file="$(find scripts)/launch/system/basenodes_bringup.launch" >
    <arg name="urdf_file" value="$(arg urdf_file)" />
    <arg name="base_frame_id" value="$(arg base_frame_id)" />
    <arg name="odom_frame_id" value="$(arg odom_frame_id)" />
    <arg name="plane_number" value="$(arg plane_number)" />
    <!-- odom node-->
    <arg name="robot_yaml_filepath" value="$(arg robot_yaml_filepath)" />
    <arg name="odom_yaml_filepath" value="$(arg odom_yaml_filepath)" />
    <arg name="imu_adjust_param_filepath" value="$(arg imu_adjust_param_filepath)" />
  </include>

  <include file="$(find scripts)/launch/modules/common/joy_control.launch" >
    <arg name="joystick_param_filepath" value="$(arg joystick_param_filepath)" />
  </include>

  <node pkg="rviz" type="rviz" name="rviz" output="screen" required="True"
        args="-d $(arg rviz_config_file)" />

</launch>
